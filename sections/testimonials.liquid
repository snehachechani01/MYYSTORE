<div class="page-width" data-section-id="{{ section.id }}" data-section-type="quotes">
  {% if section.settings.title != blank %}
    <div class="section-header text-center">
      <h2>{{ section.settings.title | escape }}</h2>
    </div>
  {% endif %}

  {% if section.blocks.size > 0 %}
    <div class="quotes-slider-wrapper">
      <div class="quotes-slider" id="Quotes-{{ section.id }}" data-count="{{ section.blocks.size }}">
        {% for block in section.blocks %}
          <div class="quotes-slide">
            {% if block.settings.quote != blank %}
              <div class="testimonial-description">{{ block.settings.quote }}</div>
            {% endif %}
            {% if block.settings.author != blank %}
              <div class="testimonial-author">{{ block.settings.author | escape }}</div>
            {% endif %}
            {% if block.settings.upload_image != blank %}
              <div class="testimonial-image">
                <img src="{{ block.settings.upload_image | img_url: '200x200', scale: 2 }}" alt="">
              </div>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    </div>
  {% endif %}

  {% if section.blocks.size == 0 %}
    {% include 'no-blocks' %}
  {% endif %}
</div>

{% stylesheet %}
  .quotes-slider-wrapper {
    width: 100%;
    overflow: hidden;
  }
  .quotes-slider {
    display: flex;
    width: max-content;
    transition: transform 0.3s ease-in-out;
  }
  .quotes-slide {
    width: 100%;
    flex-shrink: 0;
    margin-right: 20px;
    text-align: center;
  }
  .testimonial-description {
    margin-bottom: 20px;
  }
  .testimonial-author {
    font-weight: bold;
  }
  .testimonial-image img {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    margin-top: 20px;
  }
{% endstylesheet %}

{% javascript %}
  var quotesSlider = document.getElementById("Quotes-{{ section.id }}");
  var sliderCount = parseInt(quotesSlider.getAttribute("data-count"));
  var currentIndex = 0;
  var interval = null;

  function nextSlide() {
    currentIndex = (currentIndex + 1) % sliderCount;
    var translateX = -currentIndex * quotesSlider.offsetWidth;
    quotesSlider.style.transform = "translateX(" + translateX + "px)";
  }

  function startInterval() {
    if (!interval) {
      interval = setInterval(nextSlide, 5000);
    }
  }

  function stopInterval() {
    if (interval) {
      clearInterval(interval);
      interval = null;
    }
  }

  startInterval();
  quotesSlider.addEventListener("mouseenter", stopInterval);
  quotesSlider.addEventListener("mouseleave", startInterval);
{% endjavascript %}

{% schema %}
{
"name": "Testimonials",
"class": "index-section",
"max_blocks": 9,
"settings": [
{
"type": "text",
"id": "title",
"label": "Heading",
"default": "Testimonials"
}
],
"blocks": [
{
"type": "quote",
"name": "Testimonial",
"settings": [
{
"type": "richtext",
"id": "quote",
"label": "Text",
"default": "<p>Add customer reviews and testimonials to showcase your storeâ€™s happy Customers.</p>"
},
{
"type": "text",
"id": "author",
"label": "Author",
"default": "Author's name"
},
     {
          "type":"image_picker",

          "id":"upload_image",
          "label":"upload a image",

          "info":"image size will be 200x200px "
        }
]
}
],

"presets": [
{
"name": "Testimonials",
"category": "Text",
"blocks": [
{
"type": "quote"
},
{
"type": "quote"
},
{
"type": "quote"
},
  {
  "type": "quote"
  }
]
}
]
}
{% endschema %}
