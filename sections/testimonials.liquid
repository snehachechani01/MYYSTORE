<div class="page-width" data-section-id="{{ section.id }}" data-section-type="quotes">
  {% if section.settings.title != blank %}
    <div class="section-header text-center">
      <h2>{{ section.settings.title | escape }}</h2>
    </div>
  {% endif %}

  {% if section.blocks.size > 0 %}
    <div class="quotes-wrapper">
      <div class="quotes-slider" id="Quotes-{{149039743271 }}" data-count="{{ section.blocks.size }}">
        {% for block in section.blocks %}
          <div class="quotes-slide" {{ block.shopify_attributes }}>
            <blockquote class="quotes-slider__text text-center">
              {% if block.settings.quote != blank %}
                <div class="rte-setting">{{ block.settings.quote }}</div>
              {% endif %}
              {% if block.settings.author != blank %}
                <cite>{{ block.settings.author | escape }}</cite>
              {% endif %}
            </blockquote>
          </div>
        {% endfor %}
      </div>
    </div>
  {% endif %}

  {% if section.blocks.size == 0 %}
  {% endif %}
</div>

{% schema %}
{
  "name": "Testimonials",
  "class": "index-section",
  "max_blocks": 9,
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Testimonials"
    }
  ],
  "blocks": [
    {
      "type": "quote",
      "name": "Testimonial",
      "settings": [
        {
          "type": "richtext",
          "id": "quote",
          "label": "Text",
          "default": "<p>Add customer reviews and testimonials to showcase your storeâ€™s happy Customers.</p>"
        },
        {
          "type": "text",
          "id": "author",
          "label": "Author",
          "default": "Author's name"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonials",
      "category": "Text",
      "blocks": [
        {
          "type": "quote"
        },
        {
          "type": "quote"
        },
        {
          "type": "quote"
        }
      ]
    }
  ]
}
{% endschema %}

<script>
  // Wait for the page to load before initializing the slider
  document.addEventListener("DOMContentLoaded", function() {
    // Initialize the slider
    var slider = document.querySelector("#Quotes-{{149039743271 }} .quotes-slider");
    var slides = slider.querySelectorAll(".quotes-slide");
    var slideCount = slides.length;
    var currentIndex = 0;

    // Set up the next slide
    function nextSlide() {
      // Move the slider to the next slide
      currentIndex++;
      if (currentIndex >= slideCount) {
        currentIndex = 0;
      }
      slider.style.transform = "translateX(" + (-currentIndex * 100 / slideCount) + "%)";
    }

    // Start the slideshow
    var intervalId = setInterval(nextSlide, 5000);

    // Pause the slideshow when the user interacts with it
    slider.addEventListener("mouseover", function() {
      clearInterval(intervalId);
    });
    slider.addEventListener("mouseout", function() {
      intervalId = setInterval(nextSlide, 5000);
    });
  });
</script>
